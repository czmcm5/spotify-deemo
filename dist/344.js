"use strict";(self.webpackChunkspotify_deemo=self.webpackChunkspotify_deemo||[]).push([[344],{2344:(e,n,r)=>{r.r(n),r.d(n,{default:()=>Le});var t=r(7528),o=r(7695),i=r(5647),a=r(9494);const s=r.p+"images/HomeIcon.png?ver=f1ed5e669286c9f953f2fe44403f3326",c=r.p+"images/SearchIcon.png?ver=c452286440885f40c8e72320be525330";var d,l,g=r(4848);const h=()=>{const{pathname:e}=(0,i.zy)(),n=n=>e===n?"active":"";return(0,g.jsxs)(m,{children:[(0,g.jsxs)(p,{to:"/",className:"".concat(n("/")),sx:{margiBnottom:"0.7rem"},children:[(0,g.jsx)("img",{src:s,alt:"홈 아이콘"}),(0,g.jsx)(a.A,{variant:"h2",fontWeight:700,children:"메인 홈"})]}),(0,g.jsxs)(p,{to:"/search",className:n("/search"),children:[(0,g.jsx)("img",{src:c,alt:"검색 아이콘"}),(0,g.jsx)(a.A,{variant:"h2",fontWeight:700,children:"검색하기"})]})]})},m=(0,o.Ay)("div")(d||(d=(0,t.A)(["\n  width: 100%;\n  margin-bottom: 8px;\n  padding: 1.8rem;\n  color: white;\n  background-color: #121212;\n  border-radius: 8px;\n"]))),p=(0,o.Ay)(i.k2)(l||(l=(0,t.A)(["\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  color: #adadad;\n  img {\n    opacity: 0.5;\n  }\n\n  &:hover,\n  &.active {\n    color: white;\n    img {\n      opacity: 1;\n    }\n  }\n"])));var x=r(6858),u=r(431),f=r(2077);const v=r.p+"images/BookmarkIcon.png?ver=b29bf0ae7706e635c9f6294781e08862";var y,j;const A=()=>(0,g.jsxs)(b,{children:[(0,g.jsxs)(x.A,{display:"flex",children:[(0,g.jsx)(w,{src:v,alt:"북마크 아이콘"}),(0,g.jsx)(a.A,{variant:"h2",fontWeight:700,children:"내 라이브러리"})]}),(0,g.jsx)(u.A,{children:(0,g.jsx)(f.A,{})})]}),b=(0,o.Ay)("div")(y||(y=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 1rem;\n"]))),w=(0,o.Ay)("img")(j||(j=(0,t.A)(["\n  width: 25px;\n  margin-right: 20px;\n"])));var k=r(6475),_=r(1083),I=r(5800);const C=_.A.create({baseURL:I.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});C.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const S=C;var L=r(7286);const P=async()=>{try{return(await S.get("/me")).data}catch(e){throw new Error("프로필 얻기 실패")}},R=()=>{const e=localStorage.getItem("access_token");return(0,L.I)({queryKey:["current-user-profile"],queryFn:P,enabled:!!e,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1})};var U,z,B=r(4812),E=r(2483);const F=()=>(0,g.jsxs)(N,{children:[(0,g.jsx)(a.A,{variant:"h2",fontWeight:700,children:"첫 번째 플레이리스트를 만드세요."}),(0,g.jsx)("div",{children:"어렵지 않아요. 저희가 도와드릴게요."}),(0,g.jsx)(q,{variant:"contained",color:"secondary",children:"플레이리스트 만들기"})]}),N=(0,o.Ay)("div")(U||(U=(0,t.A)(["\n  padding: 1.5rem;\n  margin-top: 0.5rem;\n  color: white;\n  background-color: #1a1a1a;\n  border-radius: 8;\n"]))),q=(0,o.Ay)(u.A)(z||(z=(0,t.A)(["\n  margin-top: 1rem;\n  font-weight: 700;\n"])));var O,W;const M=e=>{let{list:n}=e;return n.map(((e,n)=>{var r;return(0,g.jsxs)(T,{children:[(0,g.jsx)(H,{children:e.images&&(0,g.jsx)("img",{src:e.images[0].url})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(a.A,{fontSize:16,children:e.name}),(0,g.jsxs)(a.A,{color:"#B3B3B3",children:["플레이리스트 • ",(null==e||null===(r=e.owner)||void 0===r?void 0:r.display_name)||"알수없음"]})]})]},n)}))},T=(0,o.Ay)("div")(O||(O=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  padding: 0.6rem;\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    background-color: #1c1c1c;\n    /* background-color: #404040; */\n  }\n"]))),H=(0,o.Ay)("div")(W||(W=(0,t.A)(["\n  width: 3.5rem;\n  aspect-ratio: 1/1;\n  margin-right: 1rem;\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: #313131;\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"])));var K=r(4651),V=r(6540);var D,G;const J=()=>{const{data:e}=R(),{data:n,isLoading:r,error:t,hasNextPage:o,fetchNextPage:i,isFetchingNextPage:a}=(e=>{let{limit:n,offset:r}=e;return(0,k.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:r}=e;return(async e=>{let{limit:n,offset:r}=e;try{return(await S.get("/me/playlists",{params:{limit:n,offset:r}})).data}catch(e){throw new Error("실패: playlist 가져오기")}})({limit:n,offset:r})},initialPageParam:0,getNextPageParam:e=>{if(e.next){const n=new URL(e.next).searchParams.get("offset");return n?parseInt(n):void 0}}})})({limit:10,offset:0});return(e=>{let{isLoading:n,isFinished:r,onIntersect:t}=e;(0,V.useEffect)((()=>{if(n)return;if(r)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&t()}),{threshold:0}),o=document.getElementById("observer");return o&&e.observe(o),()=>{o&&e.unobserve(o)}}),[n,r,t])})({isLoading:a,isFinished:!o,onIntersect:i}),e?r?(0,g.jsx)(B.A,{}):t?(0,g.jsx)(E.A,{errMessage:t.message}):null!=n&&n.pages&&0!==n.pages[0].total?(0,g.jsxs)(g.Fragment,{children:[n.pages.map(((e,n)=>(0,g.jsx)(M,{list:e.items},n))),(0,g.jsx)(Q,{children:a?(0,g.jsx)("div",{className:"loading"}):o?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)("div",{children:"마지막 입니다."})}),!a&&(0,g.jsx)(X,{id:"observer"})]}):(0,g.jsx)(F,{}):(0,g.jsx)(F,{})},Q=(0,K.Ay)("div")(D||(D=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 3rem;\n  font-size: 14px;\n  color: #858585;\n\n  div.loading {\n    box-sizing: border;\n    width: 30px;\n    height: 30px;\n    border: 4px solid #25c56a54;\n    border-top-color: #25c56a;\n    border-radius: 100%;\n\n    animation: spin 1s ease-in-out infinite;\n  }\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),X=(0,K.Ay)("div")(G||(G=(0,t.A)(["\n  height: 1rem;\n  /* background-color: yellow; */\n"]))),Y=r.p+"images/fake_Logo.png?ver=23c568bf691b001bb110dc7d5d52caaa";var Z=r(8097);const $=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,n)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n%62]),""),n=(r=await(async e=>{const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",n)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const t=Z.xl,o=I.f,i=Z.iW,a=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),t&&o){const e={response_type:"code",client_id:t,scope:i,code_challenge_method:"S256",code_challenge:n,redirect_uri:o};a.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=a.toString()}},ee=()=>{localStorage.removeItem("code_verifier"),localStorage.removeItem("access_token"),window.location.href="/"},ne=["#ed9282","#fad57a","#f48aab","#87bbe2","#56b444"],re=r.p+"images/profileIcon.png?ver=e2f1e38bebae9a2ca011ed6975e9d0d9";var te,oe;const ie=e=>{let{isOpen:n,itemRef:r,changeColorCode:t}=e;return n?(0,g.jsxs)(ae,{ref:r,children:[(0,g.jsx)(se,{onClick:e=>{e.stopPropagation(),t()},children:"랜덤 프로필"}),(0,g.jsx)("div",{className:"hr"}),(0,g.jsx)(se,{onClick:ee,children:"Logout"})]}):null},ae=(0,o.Ay)("div")(te||(te=(0,t.A)(["\n  position: absolute;\n  right: -30%;\n  top: 110%;\n  width: 12rem;\n  padding: 4px;\n  font-size: 16px;\n  background-color: #303030;\n  border-radius: 4px;\n\n  div.hr {\n    height: 1px;\n    background-color: #484848;\n  }\n"]))),se=(0,o.Ay)("div")(oe||(oe=(0,t.A)(["\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: #4d4d4d;\n    text-decoration: underline;\n  }\n"])));var ce,de,le;const ge=e=>{let{imageUrl:n}=e;return(0,g.jsx)(xe,{src:n,alt:"프로필 아이콘"})},he=()=>{var e;const{data:n}=R(),{colorCode:r,getRandomCode:t}=(()=>{const[e,n]=(0,V.useState)("#56b444");return{colorCode:e,getRandomCode:()=>{const r=ne.filter((n=>n!==e)),t=Math.floor(Math.random()*r.length);n(r[t])}}})(),{open:o,open_modal:i,close_modal:a}=(()=>{const[e,n]=(0,V.useState)(!1);return{open:e,close_modal:e=>{n(!1),e&&e()},open_modal:()=>n(!0)}})(),s=(e=>{const n=(0,V.useRef)(null),r=r=>{n.current&&!n.current.contains(r.target)&&e()};return(0,V.useEffect)((()=>(document.addEventListener("mouseup",r),()=>{document.removeEventListener("mouseup",r)})),[e]),n})(a),c=(null==n||null===(e=n.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url)||null;return(0,g.jsxs)(me,{onClick:i,children:[(0,g.jsx)(pe,{haveImgUrl:!!c,code:r,children:(0,g.jsx)(ge,{imageUrl:c||re})}),(0,g.jsx)(ie,{isOpen:o,itemRef:s,changeColorCode:()=>a(t)})]})},me=(0,o.Ay)("div")(ce||(ce=(0,t.A)(["\n  position: relative;\n"]))),pe=(0,o.Ay)("div")(de||(de=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3.4rem;\n  aspect-ratio: 1/1;\n  background-color: ",";\n  border-radius: 50px;\n  border: 8px solid;\n  border-color: ",";\n  overflow: hidden;\n  cursor: pointer;\n"])),(e=>{let{code:n}=e;return n}),(e=>{let{haveImgUrl:n,code:r}=e;return n?r:"#1f1f1f"})),xe=(0,o.Ay)("img")(le||(le=(0,t.A)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n"])));var ue;const fe=()=>localStorage.getItem("access_token")?(0,g.jsx)(he,{}):(0,g.jsx)(ve,{variant:"contained",color:"secondary",onClick:$,children:"로그인하기"}),ve=(0,o.Ay)(u.A)(ue||(ue=(0,t.A)(["\n  width: 7rem;\n  height: 2.6rem;\n  font-size: 16px;\n  font-weight: bold;\n"])));var ye,je;const Ae=()=>(0,g.jsxs)(be,{children:[(0,g.jsx)(we,{src:Y,alt:"fack_logo",onClick:()=>window.location.href="/"}),(0,g.jsx)(fe,{})]}),be=(0,o.Ay)("div")(ye||(ye=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 0 1rem;\n  height: 3rem;\n  margin-bottom: 8px;\n  color: white;\n  border-radius: 8px;\n"]))),we=(0,o.Ay)("img")(je||(je=(0,t.A)(["\n  width: 2.2rem;\n  cursor: pointer;\n"])));var ke,_e,Ie,Ce,Se;const Le=()=>(0,g.jsxs)(Pe,{children:[(0,g.jsx)(Ae,{}),(0,g.jsxs)(Re,{children:[(0,g.jsxs)(Ue,{children:[(0,g.jsx)(h,{}),(0,g.jsxs)(ze,{children:[(0,g.jsx)(A,{}),(0,g.jsx)(J,{})]})]}),(0,g.jsx)(Be,{children:(0,g.jsx)(i.sv,{})})]})]}),Pe=(0,o.Ay)("div")(ke||(ke=(0,t.A)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100vh;\n  padding: 8px;\n"]))),Re=(0,o.Ay)("div")(_e||(_e=(0,t.A)(["\n  display: flex;\n  flex: 1;\n"]))),Ue=(0,o.Ay)("div")(Ie||(Ie=(0,t.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 16rem;\n  max-width: 26rem;\n  height: 100%;\n  margin-right: 8px;\n\n  "," {\n    display: none;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")})),ze=(0,o.Ay)("div")(Ce||(Ce=(0,t.A)(["\n  flex: 1;\n  width: 100%;\n  padding: 0.5rem;\n  color: white;\n  background-color: #121212;\n  border-radius: 8;\n"]))),Be=(0,o.Ay)("div")(Se||(Se=(0,t.A)(["\n  flex: 3;\n  padding: 1rem;\n  background: linear-gradient(to bottom, #252525, #121212 30%);\n  border-radius: 8px;\n"])))},2483:(e,n,r)=>{r.d(n,{A:()=>i});var t=r(7163),o=r(4848);const i=e=>{let{errMessage:n}=e;return(0,o.jsxs)(t.A,{severity:"error",children:[n," "]})}}}]);
//# sourceMappingURL=344.js.map?ver=d560c876462bb7b79391