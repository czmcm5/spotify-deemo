"use strict";(self.webpackChunkspotify_deemo=self.webpackChunkspotify_deemo||[]).push([[701],{1206:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"images/music.png?ver=708d7d1874e81d24a372040f4906d76d"},1271:(e,n,r)=>{r.d(n,{A:()=>c});var t,i=r(7528),o=r(7695),a=r(431),s=r(4690),l=r(4848);const c=()=>(0,l.jsx)(d,{variant:"contained",color:"secondary",onClick:s.G,children:"로그인하기"}),d=(0,o.Ay)(a.A)(t||(t=(0,i.A)(["\n  width: 7rem;\n  height: 2.6rem;\n  font-size: 16px;\n  font-weight: bold;\n"])))},1696:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"images/fake_Logo.png?ver=23c568bf691b001bb110dc7d5d52caaa"},2483:(e,n,r)=>{r.d(n,{A:()=>o});var t=r(7163),i=r(4848);const o=e=>{let{errMessage:n}=e;return(0,i.jsxs)(t.A,{severity:"error",children:[n," "]})}},2885:(e,n,r)=>{r.d(n,{A:()=>i});var t=r(6540);const i=e=>{let{page:n,isLoading:r,isFinished:i,onIntersect:o}=e;(0,t.useEffect)((()=>{if(r)return;if(i)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&o()}),{threshold:0}),t=document.getElementById("observer-".concat(n));return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[r,i,o])}},3653:(e,n,r)=>{r.d(n,{A:()=>o});var t=r(7286),i=r(2154);const o=()=>{const{data:e}=(0,t.I)({queryKey:["spo-access-token"],queryFn:i.K});return null==e?void 0:e.access_token}},4064:(e,n,r)=>{r.d(n,{Dg:()=>s,Nt:()=>l,U4:()=>o,bt:()=>a});var t=r(3110),i=r(5443);const o=async e=>{let{limit:n,offset:r}=e;try{return(await i.A.get("/me/playlists",{params:{limit:n,offset:r}})).data}catch(e){throw new Error("실패: playlist 가져오기")}},a=async e=>{try{return(await i.A.get("/playlists/".concat(e.playlist_id),{params:e})).data}catch(e){var n;if((0,t.F0)(e)&&401===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("retry");throw new Error("fail getPlaylist")}},s=async e=>{try{return(await i.A.get("/playlists/".concat(e.playlist_id,"/tracks"),{params:e})).data}catch(e){throw new Error("fail getPlaylistItems")}},l=async(e,n)=>{try{const{name:r,collaborative:t,description:o}=n;return(await i.A.post("/users/".concat(e,"/playlists"),{name:r,public:n.public,collaborative:t,description:o})).data}catch(e){throw new Error("fail createPlaylist")}}},4690:(e,n,r)=>{r.d(n,{G:()=>o,r:()=>a});var t=r(8097),i=r(5800);const o=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,n)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n%62]),""),n=(r=await(async e=>{const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",n)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const o=t.xl,a=i.f,s=t.iW,l=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),o&&a){const e={response_type:"code",client_id:o,scope:s,code_challenge_method:"S256",code_challenge:n,redirect_uri:a};l.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=l.toString()}},a=()=>{localStorage.removeItem("code_verifier"),localStorage.removeItem("access_token"),window.location.href="/"}},4701:(e,n,r)=>{r.r(n),r.d(n,{default:()=>ze});var t=r(7528),i=r(4651),o=r(5647),a=r(7286),s=r(4064);const l=e=>(0,a.I)({queryKey:["playlist-detail",e.playlist_id],queryFn:()=>(0,s.bt)(e),enabled:!!e.playlist_id});var c,d=r(2483),h=r(9494),u=r(7695),p=r(1271),m=r(4848);const g=()=>(0,m.jsxs)(x,{children:[(0,m.jsx)(h.A,{variant:"h1",marginBottom:"0.5rem",children:"인증이 만료되었습니다."}),(0,m.jsx)(h.A,{variant:"h2",color:"#999999",marginBottom:"1rem",children:"재로그인 해주세요."}),(0,m.jsx)(p.A,{})]}),x=(0,u.Ay)("div")(c||(c=(0,t.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n"])));var v,y,f,j,A=r(1696),b=r(1206);const w=e=>{let{image:n,listName:r,description:t,ownerName:i,count:o}=e;return(0,m.jsxs)(k,{children:[(0,m.jsx)(P,{children:(0,m.jsx)("img",{src:n||b.A})}),(0,m.jsxs)("div",{children:[(0,m.jsx)(O,{children:r}),(0,m.jsx)("div",{children:t}),(0,m.jsxs)(_,{children:[(0,m.jsx)("img",{src:A.A}),(0,m.jsx)("span",{children:i}),(0,m.jsx)("span",{children:"•"}),(0,m.jsxs)("span",{children:[o,"곡"]})]})]})]})},k=(0,u.Ay)("div")(v||(v=(0,t.A)(["\n  flex-shrink: 0; // 공간이 부족할 때 box가 줄어들지않음\n  display: flex;\n  align-items: center;\n  justify-items: flex-start;\n  height: 22rem;\n  padding: 4rem 2rem 0rem 2rem;\n  background: linear-gradient(to bottom, #424242, #222222 90%);\n"]))),P=(0,u.Ay)("div")(y||(y=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n  max-width: 15rem;\n  aspect-ratio: 1/1;\n  margin-right: 1.5rem;\n  background-color: #313131;\n  border-radius: 4px;\n  box-shadow: 0 3px 10px 2px #0000009d;\n  overflow: hidden;\n  cursor: pointer;\n\n  img.Thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  "," {\n    max-width: 13rem;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")})),O=(0,u.Ay)("div")(f||(f=(0,t.A)(["\n  min-height: 5rem;\n  font-size: 55px;\n  font-weight: 700;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n\n  "," {\n    font-size: 40px;\n  }\n  "," {\n    font-size: 30px;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")}),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")})),_=(0,u.Ay)("div")(j||(j=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  margin-top: 1rem;\n  img {\n    width: 20px;\n  }\n  span {\n    margin-left: 5px;\n  }\n"])));var S=r(4026),I=r(6700),N=r(8828),q=r(4963),E=r(1361),F=r(6120),L=r(4705),z=r(6475);function D(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}var C=r(2885),T=r(4812),U=r(5865);function B(e){if(null===e)return"-";const n=new Date(e),r=(new Date).getTime()-n.getTime(),t=Math.floor(r/864e5);return t>0?"".concat(t,"일 전"):"오늘"}function K(e){const n=Math.floor(e/1e3),r=Math.floor(n/60),t=(n%60).toString().padStart(2,"0");return"".concat(r,":").concat(t)}function M(e,n,r){return e*n+r+1}const R=e=>"description"in e;var G,H,V;const W=e=>{var n,r;let{item:t,idx:i}=e;const o=R(t.track)?t.track.imgaes[0].url:null===(n=t.track.album.images)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.url;return(0,m.jsxs)($,{children:[(0,m.jsx)(J,{children:i}),(0,m.jsx)(J,{children:(0,m.jsx)(Q,{children:(0,m.jsx)("img",{src:o||b.A,alt:"track-thumbnail"})})}),(0,m.jsxs)(J,{children:[(0,m.jsx)("div",{className:"title",children:t.track.name||"no title"}),(0,m.jsx)("div",{children:R(t.track)?"":t.track.artists[0].name})]}),(0,m.jsx)(J,{children:R(t.track)?"-":null===(r=t.track.album)||void 0===r?void 0:r.name}),(0,m.jsx)(J,{className:"added_at",children:B(t.added_at||null)}),(0,m.jsx)(J,{children:K(t.track.duration_ms)})]})},$=(0,u.Ay)(N.A)(G||(G=(0,t.A)(["\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    background-color: #333333;\n  }\n"]))),J=(0,u.Ay)(q.A)(H||(H=(0,t.A)(["\n  border: 0;\n  && {\n    font-size: 16px;\n    color: #858585;\n  }\n  &.added_at {\n    "," {\n      display: none;\n    }\n  }\n  .title {\n    color: white;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")})),Q=(0,u.Ay)("div")(V||(V=(0,t.A)(["\n  width: 3rem;\n  aspect-ratio: 1/1;\n  border-radius: 4px;\n  overflow: hidden;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"])));var X,Y;const Z=e=>{let{id:n}=e;const{data:r,isLoading:t,error:i,hasNextPage:o,fetchNextPage:a,isFetchingNextPage:l}=(c={playlist_id:n,limit:10},(0,z.q)({queryKey:["playlist-items",c],queryFn:e=>{let{pageParam:n}=e;return(0,s.Dg)(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?D(Object(r),!0).forEach((function(n){(0,L.A)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({offset:n},c))},initialPageParam:0,getNextPageParam:e=>{if(e.next){const n=new URL(e.next).searchParams.get("offset");return n?parseInt(n):void 0}}}));var c;return(0,C.A)({page:"playlistItems",isLoading:l,isFinished:!o,onIntersect:a}),t?(0,m.jsx)(T.A,{}):i?(0,m.jsx)(d.A,{errMessage:i.message}):(0,m.jsxs)(ee,{children:[(0,m.jsxs)(S.A,{stickyHeader:!0,sx:{borderCollapse:"collapse"},children:[(0,m.jsx)(I.A,{children:(0,m.jsxs)(N.A,{children:[(0,m.jsx)(q.A,{children:"#"}),(0,m.jsx)(q.A,{colSpan:2,children:"제목"}),(0,m.jsx)(q.A,{children:"앨범"}),(0,m.jsx)(ne,{children:"추가한 날짜"}),(0,m.jsx)(q.A,{children:"시간"})]})}),(0,m.jsx)(E.A,{children:null==r?void 0:r.pages.map(((e,n)=>e.items.map(((e,r)=>(0,m.jsx)(W,{idx:M(10,n,r),item:e},r)))))})]}),(0,m.jsx)(U.A,{isLoading:l,isFinished:!o}),!l&&(0,m.jsx)(U.n,{id:"observer-playlistItems"})]})},ee=(0,u.Ay)(F.A)(X||(X=(0,t.A)(["\n  flex-grow: 1;\n  padding-bottom: 5rem;\n  overflow: auto;\n  overflow-x: hidden;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),ne=(0,u.Ay)(q.A)(Y||(Y=(0,t.A)(["\n  "," {\n    display: none;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")}));var re=r(6858),te=r(6540);var ie=r(431),oe=r(1083),ae=r(5800),se=r(3653);function le(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ce(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?le(Object(r),!0).forEach((function(n){(0,L.A)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}let de=function(e){return e.Album="album",e.Artist="artist",e.Playlis="playlist",e.Track="track",e.Show="show",e.Episode="episode",e.Audiobook="audiobook",e}({});var he;const ue=e=>{let{keyword:n}=e;return(0,m.jsxs)(pe,{children:[(0,m.jsxs)(h.A,{variant:"h1",marginBottom:"0.5rem",children:['"',n,'"과(와) 일치하는 결과 없음']}),(0,m.jsx)(h.A,{variant:"h2",color:"#999999",marginBottom:"1rem",children:"입력한 단어의 철자가 맞는지 확인하거나 짧은 키워드 또는 다른 키워드를 사용하세요."})]})},pe=(0,u.Ay)("div")(he||(he=(0,t.A)(["\n  margin-top: 2rem;\n  text-align: center;\n"])));var me,ge,xe,ve,ye;const fe=e=>{var n;let{keyword:r}=e;const{data:t,error:i,isLoading:o,hasNextPage:a,fetchNextPage:s,isFetchingNextPage:l}=(e=>{const n=(0,se.A)();return(0,z.q)({queryKey:["search",e],queryFn:r=>{let{pageParam:t=0}=r;if(""!==e.q)return n?(async(e,n)=>{console.log("umm ",{token:e,params:n});try{const r=new URLSearchParams;return r.append("q",n.q),r.append("type",n.type.join(",")),n.market&&r.append("market",n.market.toString()),n.limit&&r.append("limit",n.limit.toString()),n.offset&&r.append("offset",n.offset.toString()),n.include_external&&r.append("include_external",n.include_external),(await oe.A.get("".concat(ae.$,"/search"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},params:r})).data}catch(e){throw new Error}})(n,ce(ce({},e),{},{offset:t})):void 0},initialPageParam:0,getNextPageParam:e=>{var n,r,t,i,o,a,s;if(!e)return;const l=(null===(n=e.tracks)||void 0===n?void 0:n.next)||(null===(r=e.artists)||void 0===r?void 0:r.next)||(null===(t=e.albums)||void 0===t?void 0:t.next)||(null===(i=e.playlists)||void 0===i?void 0:i.next)||(null===(o=e.shows)||void 0===o?void 0:o.next)||(null===(a=e.episodes)||void 0===a?void 0:a.next)||(null===(s=e.audiobooks)||void 0===s?void 0:s.next);if(l){const e=new URL(l).searchParams.get("offset");return e?parseInt(e):void 0}}})})({q:r,type:[de.Track,de.Album]});return(0,C.A)({page:"search-result",isLoading:l,isFinished:!a,onIntersect:s}),""!==r&&null!=t&&t.pages?o?(0,m.jsx)(je,{children:(0,m.jsx)(T.k,{width:40,height:40})}):i?(0,m.jsx)(d.A,{errMessage:i.message}):0===(null===(n=t.pages[0])||void 0===n||null===(n=n.tracks)||void 0===n?void 0:n.total)?(0,m.jsx)(ue,{keyword:r}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(S.A,{sx:{borderCollapse:"collapse"},children:(0,m.jsx)(E.A,{children:t.pages.map(((e,n)=>{var r;return null==e||null===(r=e.tracks)||void 0===r?void 0:r.items.map(((e,r)=>{var t;const i=null===(t=e.album.images)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url;return(0,m.jsxs)(Ae,{children:[(0,m.jsx)(be,{children:M(20,n,r)}),(0,m.jsx)(be,{children:(0,m.jsx)(we,{children:(0,m.jsx)("img",{src:i||b.A,alt:"track-thumbnail"})})}),(0,m.jsxs)(be,{children:[(0,m.jsx)("div",{className:"title",children:e.name}),(0,m.jsx)("div",{children:e.artists[0].name})]}),(0,m.jsx)(be,{children:e.album.name}),(0,m.jsx)(be,{children:(0,m.jsx)(ke,{children:"추가하기"})})]},r)}))}))})}),(0,m.jsx)(U.A,{isLoading:l,isFinished:!a}),!l&&(0,m.jsx)(U.n,{id:"observer-search-result"})]}):null},je=(0,u.Ay)("div")(me||(me=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]))),Ae=(0,u.Ay)(N.A)(ge||(ge=(0,t.A)(["\n  cursor: pointer;\n  &:hover {\n    background-color: #333333;\n  }\n"]))),be=(0,u.Ay)(q.A)(xe||(xe=(0,t.A)(["\n  border: 0;\n  padding: 0.5rem;\n  && {\n    font-size: 16px;\n    color: #858585;\n  }\n  .title {\n    color: white;\n  }\n"]))),we=(0,u.Ay)("div")(ve||(ve=(0,t.A)(["\n  width: 3rem;\n  aspect-ratio: 1/1;\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: #2a2a2a;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"]))),ke=(0,u.Ay)(ie.A)(ye||(ye=(0,t.A)(["\n  white-space: nowrap;\n  color: white;\n  border: 1px solid #858585;\n  cursor: pointer;\n\n  &:hover {\n    border-color: white;\n  }\n"])));var Pe,Oe,_e,Se;const Ie=()=>{const{keyword:e,updateKeyword:n}=(()=>{const[e,n]=(0,te.useState)("");return{keyword:e,updateKeyword:e=>n(e.target.value)}})(),r=function(e,n){const[r,t]=(0,te.useState)(e);return(0,te.useEffect)((()=>{const r=setTimeout((()=>{t(e)}),n||500);return()=>{clearTimeout(r)}}),[e,n]),r}(e);return(0,m.jsxs)(Ne,{children:[(0,m.jsxs)(qe,{children:[(0,m.jsx)(h.A,{variant:"h1",children:"플레이리스트에 추가할 곡을 찾아보세요"}),(0,m.jsx)(Fe,{value:e,onChange:n,placeholder:"곡 또는 에피소드 검색하기"})]}),(0,m.jsx)(Ee,{children:(0,m.jsx)(fe,{keyword:r})})]})},Ne=(0,u.Ay)(re.A)(Pe||(Pe=(0,t.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  margin-top: 1rem;\n"]))),qe=(0,u.Ay)(re.A)(Oe||(Oe=(0,t.A)(["\n  flex-shrink: 0;\n  padding: 1rem;\n"]))),Ee=(0,u.Ay)(re.A)(_e||(_e=(0,t.A)(["\n  flex-grow: 1;\n  padding: 0 1rem 5rem 1rem;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),Fe=(0,u.Ay)("input")(Se||(Se=(0,t.A)(["\n  width: 100%;\n  max-width: 23rem;\n  padding: 0.7rem;\n  margin: 1rem 0;\n  font-size: 16px;\n  color: white;\n  background-color: #333333;\n  border: 1px solid #333333;\n  border-radius: 4px;\n  outline: 0;\n  &:hover {\n    border-color: #606060;\n  }\n  &:focus {\n    border-color: #b1b1b1;\n  }\n"])));var Le;const ze=()=>{var e,n,r;const{id:t=""}=(0,o.g)(),{data:i,error:a}=l({playlist_id:t});return a&&"retry"===a.message?(0,m.jsx)(g,{}):a?(0,m.jsx)(d.A,{errMessage:a.message}):(0,m.jsxs)(De,{children:[(0,m.jsx)(w,{image:null!=i&&i.images?null==i?void 0:i.images[0].url:null,listName:(null==i?void 0:i.name)||"",description:(null==i?void 0:i.description)||"",ownerName:(null==i||null===(e=i.owner)||void 0===e?void 0:e.display_name)||"알수없음",count:(null==i||null===(n=i.tracks)||void 0===n?void 0:n.items.length)||0}),0===(null==i||null===(r=i.tracks)||void 0===r?void 0:r.total)?(0,m.jsx)(Ie,{}):(0,m.jsx)(Z,{id:t})]})},De=(0,i.Ay)("div")(Le||(Le=(0,t.A)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding: 1rem;\n"])))},5443:(e,n,r)=>{r.d(n,{A:()=>a});var t=r(1083),i=r(5800);const o=t.A.create({baseURL:i.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});o.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const a=o},5865:(e,n,r)=>{r.d(n,{A:()=>c,n:()=>h});var t,i,o=r(7528),a=r(4651),s=r(4812),l=r(4848);const c=e=>{let{isLoading:n,isFinished:r}=e;return(0,l.jsx)(d,{children:n?(0,l.jsx)(s.k,{width:30,height:30}):r?(0,l.jsx)("div",{children:"마지막 입니다."}):(0,l.jsx)(l.Fragment,{})})},d=(0,a.Ay)("div")(t||(t=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 3rem;\n  font-size: 14px;\n  color: #858585;\n"]))),h=(0,a.Ay)("div")(i||(i=(0,o.A)(["\n  height: 1rem;\n  /* background-color: yellow; */\n"])))}}]);
//# sourceMappingURL=701.js.map?ver=c00fb6404a70432080e8