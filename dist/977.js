/*! For license information please see 977.js.LICENSE.txt */
"use strict";(self.webpackChunkspotify_deemo=self.webpackChunkspotify_deemo||[]).push([[977],{868:(e,n,r)=>{r.d(n,{S:()=>i,x:()=>s});var t=r(6540),o=r(4848);const a=(0,t.createContext)(void 0),i=e=>{let{children:n}=e;const[r,i]=(0,t.useState)("none"),[s,c]=(0,t.useState)(""),d={openAlert:r,message:s,showAlert:(0,t.useCallback)((e=>{c(e),i("show"),setTimeout((()=>{i("none")}),2e3)}),[])};return(0,o.jsx)(a.Provider,{value:d,children:n})},s=()=>{const e=(0,t.useContext)(a);if(!e)throw new Error("useAlertMessage must be used within an AlertProvider");return e}},1206:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"images/music.png?ver=708d7d1874e81d24a372040f4906d76d"},1271:(e,n,r)=>{r.d(n,{A:()=>d});var t,o=r(7528),a=r(6739),i=r(431),s=r(4690),c=r(4848);const d=()=>(0,c.jsx)(l,{variant:"contained",color:"secondary",onClick:s.G,children:"로그인하기"}),l=(0,a.Ay)(i.A)(t||(t=(0,o.A)(["\n  width: 7rem;\n  height: 2.6rem;\n  font-size: 16px;\n  font-weight: bold;\n"])))},1696:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"images/fake_Logo.png?ver=23c568bf691b001bb110dc7d5d52caaa"},2483:(e,n,r)=>{r.d(n,{A:()=>a});var t=r(7163),o=r(4848);const a=e=>{let{errMessage:n}=e;return(0,o.jsxs)(t.A,{severity:"error",children:[n," "]})}},3110:(e,n,r)=>{r.d(n,{F0:()=>u});var t=r(1083);const{Axios:o,AxiosError:a,CanceledError:i,isCancel:s,CancelToken:c,VERSION:d,all:l,Cancel:h,isAxiosError:u,spread:g,toFormData:p,AxiosHeaders:m,HttpStatusCode:x,formToJSON:v,getAdapter:f,mergeConfig:y}=t.A},3179:(e,n,r)=>{r.d(n,{A:()=>o});var t=r(6540);const o=()=>{const[e,n]=(0,t.useState)("none");return{isfocuse:e,on:()=>n("show"),off:()=>n("none")}}},3413:(e,n,r)=>{r.d(n,{A:()=>o});var t=r(6540);const o=e=>{let{page:n,isLoading:r,isFinished:o,onIntersect:a}=e;(0,t.useEffect)((()=>{if(r)return;if(o)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&a()}),{threshold:0}),t=document.getElementById("observer-".concat(n));return t&&e.observe(t),()=>{t&&e.unobserve(t)}}),[r,o,a])}},4064:(e,n,r)=>{r.d(n,{Dg:()=>s,Nt:()=>c,U4:()=>a,XI:()=>d,bt:()=>i});var t=r(3110),o=r(5443);const a=async e=>{let{limit:n,offset:r}=e;try{return(await o.A.get("/me/playlists",{params:{limit:n,offset:r}})).data}catch(e){throw new Error("실패: playlist 가져오기")}},i=async e=>{try{return(await o.A.get("/playlists/".concat(e.playlist_id),{params:e})).data}catch(e){var n;if((0,t.F0)(e)&&401===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("retry");throw new Error("fail getPlaylist")}},s=async e=>{try{return(await o.A.get("/playlists/".concat(e.playlist_id,"/tracks"),{params:e})).data}catch(e){throw new Error("fail getPlaylistItems")}},c=async(e,n)=>{try{const{name:r,collaborative:t,description:a}=n;return(await o.A.post("/users/".concat(e,"/playlists"),{name:r,public:n.public,collaborative:t,description:a})).data}catch(e){throw new Error("fail createPlaylist")}},d=async e=>{try{return(await o.A.post("/playlists/".concat(e.playlist_id,"/tracks"),e)).data}catch(e){var n;if((0,t.F0)(e)&&401===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("retry");throw new Error("fail add item to playlist")}}},4651:(e,n,r)=>{r.d(n,{Ay:()=>o});var t=r(1250);function o(e,n){let r;return r=n?(0,t.Ay)(e).withConfig({displayName:n.label,shouldForwardProp:n.shouldForwardProp}):(0,t.Ay)(e),r}},4690:(e,n,r)=>{r.d(n,{G:()=>a,r:()=>i});var t=r(8097),o=r(5800);const a=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,n)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n%62]),""),n=(r=await(async e=>{const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",n)})(e),btoa(String.fromCharCode(...new Uint8Array(r))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var r;const a=t.xl,i=o.f,s=t.iW,c=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),a&&i){const e={response_type:"code",client_id:a,scope:s,code_challenge_method:"S256",code_challenge:n,redirect_uri:i};c.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=c.toString()}},i=()=>{localStorage.removeItem("code_verifier"),localStorage.removeItem("access_token"),window.location.href="/"}},5443:(e,n,r)=>{r.d(n,{A:()=>i});var t=r(1083),o=r(5800);const a=t.A.create({baseURL:o.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});a.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const i=a},5865:(e,n,r)=>{r.d(n,{A:()=>d,n:()=>h});var t,o,a=r(7528),i=r(4651),s=r(4812),c=r(4848);const d=e=>{let{isLoading:n,isFinished:r,showText:t=!0}=e;return(0,c.jsx)(l,{children:n?(0,c.jsx)(s.k,{width:30,height:30}):r&&t?(0,c.jsx)("div",{children:"마지막 입니다."}):(0,c.jsx)(c.Fragment,{})})},l=(0,i.Ay)("div")(t||(t=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 3rem;\n  font-size: 14px;\n  color: #858585;\n"]))),h=(0,i.Ay)("div")(o||(o=(0,a.A)(["\n  height: 1rem;\n  /* background-color: yellow; */\n"])))},6555:(e,n,r)=>{r.d(n,{A:()=>o});var t=r(6540);const o=function(e,n){const[r,o]=(0,t.useState)(e);return(0,t.useEffect)((()=>{const r=setTimeout((()=>{o(e)}),n||500);return()=>{clearTimeout(r)}}),[e,n]),r}},6977:(e,n,r)=>{r.r(n),r.d(n,{default:()=>Te});var t=r(7528),o=r(6739),a=r(5647),i=r(6858);const s=(0,r(3248).Ay)();var c,d=r(868),l=r(4848);const h=()=>{const{message:e,openAlert:n}=(0,d.x)();return(0,l.jsx)(u,{className:n,children:e})},u=s(i.A)(c||(c=(0,t.A)(["\n  z-index: 12;\n  position: absolute;\n  bottom: 2%;\n  right: 2%;\n  padding: 1rem 1.5rem;\n  color: #11da5b;\n  background-color: #3d3d3d;\n  border-radius: 5px;\n\n  transition: all 0.5s ease;\n  opacity: 1;\n\n  &.none {\n    bottom: -20%;\n    opacity: 0;\n  }\n"])));var g=r(4651),p=r(6475),m=r(4064);var x=r(7286),v=r(4690),f=r(5443);const y=async()=>{try{return(await f.A.get("/me")).data}catch(e){throw(0,v.r)(),new Error("프로필 얻기 실패")}},A=()=>{const e=localStorage.getItem("access_token");return(0,x.I)({queryKey:["current-user-profile"],queryFn:y,enabled:!!e,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1})};var b,w,j=r(3413),k=r(4812),C=r(2483),S=r(5865),I=r(9494),_=r(431);const E=()=>(0,l.jsxs)(P,{children:[(0,l.jsx)(I.A,{variant:"h2",fontWeight:700,children:"첫 번째 플레이리스트를 만드세요."}),(0,l.jsx)("div",{children:"어렵지 않아요. 저희가 도와드릴게요."}),(0,l.jsx)(F,{variant:"contained",color:"secondary",children:"플레이리스트 만들기"})]}),P=(0,o.Ay)("div")(b||(b=(0,t.A)(["\n  padding: 1.5rem;\n  margin-top: 0.5rem;\n  color: white;\n  background-color: #1a1a1a;\n  border-radius: 8;\n"]))),F=(0,o.Ay)(_.A)(w||(w=(0,t.A)(["\n  margin-top: 1rem;\n  font-weight: 700;\n"])));var N=r(3179),L=r(1206);const z=r.p+"images/playIcon.png?ver=7a010c498114f1e71e07aada8cdfc680";var U,R,M;const O=e=>{var n;let{item:r,goPage:t,isSelect:o}=e;const a=(0,N.A)();return(0,l.jsxs)(T,{onClick:t,className:o?"select":"",onMouseOver:a.on,onMouseLeave:a.off,children:[(0,l.jsxs)(B,{children:[(0,l.jsx)(q,{src:z,className:a.isfocuse}),r.images?(0,l.jsx)("img",{src:r.images[0].url}):(0,l.jsx)("img",{className:"musicIcon",src:L.A})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(I.A,{fontSize:16,children:r.name}),(0,l.jsxs)(I.A,{color:"#B3B3B3",children:["플레이리스트 • ",(null==r||null===(n=r.owner)||void 0===n?void 0:n.display_name)||"알수없음"]})]})]})},T=(0,o.Ay)("div")(U||(U=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  padding: 0.6rem;\n  border-radius: 4px;\n  cursor: pointer;\n\n  &.select {\n    background-color: #404040;\n  }\n  &:hover {\n    background-color: #1c1c1c;\n  }\n"]))),B=(0,o.Ay)("div")(R||(R=(0,t.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3.5rem;\n  aspect-ratio: 1/1;\n  margin-right: 1rem;\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: #313131;\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n  img.musicIcon {\n    width: 70%;\n    height: 70%;\n  }\n"]))),q=(0,o.Ay)("img")(M||(M=(0,t.A)(["\n  display: none;\n  position: absolute;\n  background-color: #0000007f;\n  &.show {\n    display: block;\n  }\n"])));var W;const H=()=>{const e=(0,a.Zp)(),{id:n=""}=(0,a.g)(),{data:r}=A(),{data:t,isLoading:o,error:i,hasNextPage:s,fetchNextPage:c,isFetchingNextPage:d}=(e=>{let{limit:n,enabled:r}=e;return(0,p.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:r}=e;return(0,m.U4)({limit:n,offset:r})},enabled:r,initialPageParam:0,getNextPageParam:e=>{if(e.next){const n=new URL(e.next).searchParams.get("offset");return n?parseInt(n):void 0}}})})({limit:10,enabled:!!r});return(0,j.A)({page:"library",isLoading:d,isFinished:!s,onIntersect:c}),r?o?(0,l.jsx)(k.A,{}):i?(0,l.jsx)(C.A,{errMessage:i.message}):null!=t&&t.pages&&0!==t.pages[0].total?(0,l.jsxs)(K,{children:[t.pages.map((r=>r.items.map(((r,t)=>(0,l.jsx)(O,{item:r,goPage:()=>(n=>e("/playlist/".concat(n)))(r.id||""),isSelect:n===r.id},t))))),(0,l.jsx)(S.A,{isLoading:d,isFinished:!s}),!d&&(0,l.jsx)(S.n,{id:"observer-library"})]}):(0,l.jsx)(E,{}):(0,l.jsx)(E,{})},K=(0,g.Ay)("div")(W||(W=(0,t.A)(["\n  height: 100%;\n  padding-bottom: 7rem;\n  overflow: scroll;\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #636363;\n    border-radius: 10px;\n    cursor: pointer;\n  }\n"]))),G=(0,r(9792).A)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),V=r.p+"images/BookmarkIcon.png?ver=b29bf0ae7706e635c9f6294781e08862";var D=r(7665),Z=r(7097);var J,Q;const X=()=>{const{mutate:e}=(()=>{const e=(0,D.jE)(),{data:n}=A();return(0,Z.n)({mutationFn:e=>n&&n.id?(0,m.Nt)(null==n?void 0:n.id,e):((0,v.G)(),Promise.reject(new Error("user is not defined"))),onSuccess:()=>{e.invalidateQueries({queryKey:["current-user-playlists"]})}})})();return(0,l.jsxs)(Y,{children:[(0,l.jsxs)(i.A,{display:"flex",children:[(0,l.jsx)($,{src:V,alt:"북마크 아이콘"}),(0,l.jsx)(I.A,{variant:"h2",fontWeight:700,children:"내 라이브러리"})]}),(0,l.jsx)(_.A,{onClick:()=>{e({name:"내 풀레이리스트"})},children:(0,l.jsx)(G,{})})]})},Y=(0,o.Ay)("div")(J||(J=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 1rem;\n"]))),$=(0,o.Ay)("img")(Q||(Q=(0,t.A)(["\n  width: 25px;\n  margin-right: 20px;\n"]))),ee=r.p+"images/HomeIcon.png?ver=f1ed5e669286c9f953f2fe44403f3326",ne=r.p+"images/SearchIcon.png?ver=c452286440885f40c8e72320be525330";var re,te;const oe=()=>{const{pathname:e}=(0,a.zy)(),n=n=>e===n?"active":"";return(0,l.jsxs)(ae,{children:[(0,l.jsxs)(ie,{to:"/",className:"".concat(n("/")),sx:{margiBnottom:"0.7rem"},children:[(0,l.jsx)("img",{src:ee,alt:"홈 아이콘"}),(0,l.jsx)(I.A,{variant:"h2",fontWeight:700,children:"메인 홈"})]}),(0,l.jsxs)(ie,{to:"/search",className:n("/search"),children:[(0,l.jsx)("img",{src:ne,alt:"검색 아이콘"}),(0,l.jsx)(I.A,{variant:"h2",fontWeight:700,children:"검색하기"})]})]})},ae=(0,o.Ay)("div")(re||(re=(0,t.A)(["\n  width: 100%;\n  margin-bottom: 8px;\n  padding: 1.8rem;\n  color: white;\n  background-color: #121212;\n  border-radius: 8px;\n"]))),ie=(0,o.Ay)(a.k2)(te||(te=(0,t.A)(["\n  text-decoration: none;\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  color: #adadad;\n\n  img {\n    opacity: 0.5;\n  }\n  &:hover,\n  &.active {\n    color: white;\n    img {\n      opacity: 1;\n    }\n  }\n"])));var se=r(1696),ce=r(1271),de=r(6540);const le=["#ed9282","#fad57a","#f48aab","#87bbe2","#56b444"],he=r.p+"images/profileIcon.png?ver=e2f1e38bebae9a2ca011ed6975e9d0d9";var ue,ge;const pe=e=>{let{isOpen:n,itemRef:r,changeColorCode:t}=e;return n?(0,l.jsxs)(me,{ref:r,children:[(0,l.jsx)(xe,{onClick:e=>{e.stopPropagation(),t()},children:"랜덤 프로필"}),(0,l.jsx)("div",{className:"hr"}),(0,l.jsx)(xe,{onClick:v.r,children:"Logout"})]}):null},me=(0,o.Ay)("div")(ue||(ue=(0,t.A)(["\n  position: absolute;\n  right: -30%;\n  top: 110%;\n  width: 12rem;\n  padding: 4px;\n  font-size: 16px;\n  background-color: #303030;\n  border-radius: 4px;\n\n  div.hr {\n    height: 1px;\n    background-color: #484848;\n  }\n"]))),xe=(0,o.Ay)("div")(ge||(ge=(0,t.A)(["\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: #4d4d4d;\n    text-decoration: underline;\n  }\n"])));var ve,fe,ye;const Ae=e=>{let{imageUrl:n}=e;return(0,l.jsx)(ke,{src:n,alt:"프로필 아이콘"})},be=()=>{var e;const{data:n}=A(),{colorCode:r,getRandomCode:t}=(()=>{const[e,n]=(0,de.useState)("#56b444");return{colorCode:e,getRandomCode:()=>{const r=le.filter((n=>n!==e)),t=Math.floor(Math.random()*r.length);n(r[t])}}})(),{open:o,open_modal:a,close_modal:i}=(()=>{const[e,n]=(0,de.useState)(!1);return{open:e,close_modal:e=>{n(!1),e&&e()},open_modal:()=>n(!0)}})(),s=(e=>{const n=(0,de.useRef)(null),r=r=>{n.current&&!n.current.contains(r.target)&&e()};return(0,de.useEffect)((()=>(document.addEventListener("mouseup",r),()=>{document.removeEventListener("mouseup",r)})),[e]),n})(i),c=(null==n||null===(e=n.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url)||null;return(0,l.jsxs)(we,{onClick:a,children:[(0,l.jsx)(je,{haveImgUrl:!!c,code:r,children:(0,l.jsx)(Ae,{imageUrl:c||he})}),(0,l.jsx)(pe,{isOpen:o,itemRef:s,changeColorCode:()=>i(t)})]})},we=(0,o.Ay)("div")(ve||(ve=(0,t.A)(["\n  position: relative;\n"]))),je=(0,o.Ay)("div")(fe||(fe=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3.4rem;\n  aspect-ratio: 1/1;\n  background-color: ",";\n  border-radius: 50px;\n  border: 8px solid;\n  border-color: ",";\n  overflow: hidden;\n  cursor: pointer;\n"])),(e=>{let{code:n}=e;return n}),(e=>{let{haveImgUrl:n,code:r}=e;return n?r:"#1f1f1f"})),ke=(0,o.Ay)("img")(ye||(ye=(0,t.A)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n"])));var Ce=r(6555);var Se;const Ie=()=>{const{keyword:e,updateKeyword:n}=(()=>{const e=(0,a.Zp)(),[n,r]=(0,de.useState)(""),t=(0,Ce.A)(n);return(0,de.useEffect)((()=>{t&&e("/search/".concat(t))}),[t]),{keyword:n,updateKeyword:e=>r(e.target.value)}})();return(0,l.jsx)(_e,{value:e,onChange:n,placeholder:"어떤 콘텐츠를 감상하고 싶으세요?"})},_e=(0,o.Ay)("input")(Se||(Se=(0,t.A)(["\n  box-sizing: border-box;\n  width: 100%;\n  max-width: 25rem;\n  height: 3rem;\n  padding: 1rem;\n  font-size: 16px;\n  color: white;\n  background-color: #2a2a2a;\n  outline: 0;\n  border: 1px solid #2a2a2a;\n  border-radius: 50px;\n  transition: border 0.3s ease;\n\n  ::placeholder {\n    color: #b0b0b0;\n  }\n  &:hover {\n    border: 1px solid #626262;\n  }\n  &:focus {\n    border: 2px solid #b0b0b0;\n  }\n"])));var Ee,Pe;const Fe=()=>{const{pathname:e}=(0,a.zy)(),n=!!localStorage.getItem("access_token"),r=e.includes("/search");return(0,l.jsxs)(Ne,{children:[(0,l.jsx)(Le,{src:se.A,alt:"fack_logo",onClick:()=>window.location.href="/"}),r&&(0,l.jsx)(Ie,{}),n?(0,l.jsx)(be,{}):(0,l.jsx)(ce.A,{})]})},Ne=(0,o.Ay)("div")(Ee||(Ee=(0,t.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 0 1rem;\n  height: 3rem;\n  margin-bottom: 8px;\n  color: white;\n  border-radius: 8px;\n"]))),Le=(0,o.Ay)("img")(Pe||(Pe=(0,t.A)(["\n  width: 2.2rem;\n  cursor: pointer;\n"])));var ze,Ue,Re,Me,Oe;const Te=()=>(0,l.jsxs)(Be,{children:[(0,l.jsx)(Fe,{}),(0,l.jsxs)(qe,{children:[(0,l.jsxs)(We,{children:[(0,l.jsx)(oe,{}),(0,l.jsxs)(He,{children:[(0,l.jsx)(X,{}),(0,l.jsx)(H,{})]})]}),(0,l.jsxs)(d.S,{children:[(0,l.jsx)(Ke,{children:(0,l.jsx)(a.sv,{})}),(0,l.jsx)(h,{})]})]})]}),Be=(0,o.Ay)("div")(ze||(ze=(0,t.A)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100vh;\n  padding: 8px;\n"]))),qe=(0,o.Ay)("div")(Ue||(Ue=(0,t.A)(["\n  display: flex;\n  flex: 1;\n  height: 100%;\n"]))),We=(0,o.Ay)("div")(Re||(Re=(0,t.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 16rem;\n  max-width: 26rem;\n  height: 100%;\n  margin-right: 8px;\n\n  "," {\n    display: none;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")})),He=(0,o.Ay)("div")(Me||(Me=(0,t.A)(["\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  padding: 0.5rem;\n  color: white;\n  background-color: #121212;\n  border-radius: 8px;\n  overflow: hidden;\n"]))),Ke=(0,o.Ay)("div")(Oe||(Oe=(0,t.A)(["\n  flex: 3;\n  height: 100%;\n  background: linear-gradient(to bottom, #252525, #121212 30%);\n  border-radius: 8px;\n  overflow: hidden;\n"])))}}]);
//# sourceMappingURL=977.js.map?ver=f732ee3be8c92f0df4ba