"use strict";(self.webpackChunkspotify_deemo=self.webpackChunkspotify_deemo||[]).push([[691],{1206:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"images/music.png?ver=708d7d1874e81d24a372040f4906d76d"},1691:(e,n,t)=>{t.r(n),t.d(n,{default:()=>re});var r=t(7528),i=t(4651),o=t(5647),a=t(7286),s=t(4064);const c=e=>(0,a.I)({queryKey:["playlist-detail",e.playlist_id],queryFn:()=>(0,s.bt)(e),enabled:!!e.playlist_id});var l,d,h,m,u=t(8079),p=t(2483),g=t(4812),x=t(7695),v=t(1696),f=t(1206),y=t(4848);const b=e=>{let{image:n,listName:t,description:r,ownerName:i,count:o}=e;return(0,y.jsxs)(A,{children:[(0,y.jsx)(j,{children:(0,y.jsx)("img",{src:n||f.A})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(w,{children:t}),(0,y.jsx)("div",{children:r}),(0,y.jsxs)(k,{children:[(0,y.jsx)("img",{src:v.A}),(0,y.jsx)("span",{children:i}),(0,y.jsx)("span",{children:"•"}),(0,y.jsxs)("span",{children:[o,"곡"]})]})]})]})},A=(0,x.Ay)("div")(l||(l=(0,r.A)(["\n  flex-shrink: 0; // 공간이 부족할 때 box가 줄어들지않음\n  display: flex;\n  align-items: center;\n  justify-items: flex-start;\n  height: 22rem;\n  padding: 4rem 2rem 0rem 2rem;\n  background: linear-gradient(to bottom, #424242, #222222 90%);\n"]))),j=(0,x.Ay)("div")(d||(d=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n  max-width: 15rem;\n  aspect-ratio: 1/1;\n  margin-right: 1.5rem;\n  background-color: #313131;\n  border-radius: 4px;\n  box-shadow: 0 3px 10px 2px #0000009d;\n  overflow: hidden;\n  cursor: pointer;\n\n  img.Thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  "," {\n    max-width: 13rem;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")})),w=(0,x.Ay)("div")(h||(h=(0,r.A)(["\n  font-size: 55px;\n  font-weight: 700;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n\n  "," {\n    font-size: 40px;\n  }\n  "," {\n    font-size: 30px;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")}),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")})),k=(0,x.Ay)("div")(m||(m=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  margin-top: 1rem;\n  img {\n    width: 20px;\n  }\n  span {\n    margin-left: 5px;\n  }\n"])));var _=t(4026),O=t(6700),P=t(8828),S=t(4963),I=t(1361),C=t(6120),E=t(4705),L=t(6475);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var z,F=t(2885),U=t(5865),R=t(9494);const M=()=>(0,y.jsxs)(q,{children:[(0,y.jsx)(R.A,{variant:"h1",children:"플레이리스트에 추가할 곡을 찾아보세요"}),(0,y.jsx)("input",{placeholder:"곡 또는 에피소드 검색하기"})]}),q=(0,x.Ay)("div")(z||(z=(0,r.A)(["\n  margin: 2rem;\n  input {\n    width: 100%;\n    max-width: 23rem;\n    padding: 0.7rem;\n    margin: 1rem 0;\n    font-size: 16px;\n    color: white;\n    background-color: #333333;\n    border: 0;\n    outline: 0;\n  }\n"])));function D(e){if(null===e)return"-";const n=new Date(e),t=(new Date).getTime()-n.getTime(),r=Math.floor(t/864e5);return r>0?"".concat(r,"일 전"):"오늘"}function T(e){const n=Math.floor(e/1e3),t=Math.floor(n/60),r=(n%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)}var B,K,G;const H=e=>"description"in e,W=e=>{var n,t;let{item:r,idx:i}=e;const o=H(r.track)?r.track.imgaes[0].url:null===(n=r.track.album.images)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.url;return(0,y.jsxs)(V,{children:[(0,y.jsx)(J,{children:i}),(0,y.jsx)(J,{children:(0,y.jsx)(Q,{children:(0,y.jsx)("img",{src:o||f.A,alt:"track-thumbnail"})})}),(0,y.jsxs)(J,{children:[(0,y.jsx)("div",{className:"title",children:r.track.name||"no title"}),(0,y.jsx)("div",{children:H(r.track)?"":r.track.artists[0].name})]}),(0,y.jsx)(J,{children:H(r.track)?"-":null===(t=r.track.album)||void 0===t?void 0:t.name}),(0,y.jsx)(J,{className:"added_at",children:D(r.added_at||null)}),(0,y.jsx)(J,{children:T(r.track.duration_ms)})]})},V=(0,x.Ay)(P.A)(B||(B=(0,r.A)(["\n  cursor: pointer;\n  &:hover {\n    background-color: #333333;\n  }\n"]))),J=(0,x.Ay)(S.A)(K||(K=(0,r.A)(["\n  border: 0;\n  && {\n    font-size: 16px;\n    color: #858585;\n  }\n  &.added_at {\n    "," {\n      display: none;\n    }\n  }\n  .title {\n    color: white;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")})),Q=(0,x.Ay)("div")(G||(G=(0,r.A)(["\n  width: 3rem;\n  aspect-ratio: 1/1;\n  border-radius: 4px;\n  overflow: hidden;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"])));var X,Y;const Z=e=>{let{id:n,isShow:t}=e;const{data:r,isLoading:i,error:o,hasNextPage:a,fetchNextPage:c,isFetchingNextPage:l}=(d={playlist_id:n,limit:10},(0,L.q)({queryKey:["playlist-items",d],queryFn:e=>{let{pageParam:n}=e;return(0,s.Dg)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){(0,E.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({offset:n},d))},initialPageParam:0,getNextPageParam:e=>{if(e.next){const n=new URL(e.next).searchParams.get("offset");return n?parseInt(n):void 0}}}));var d;return(0,F.A)({page:"playlistItems",isLoading:l,isFinished:!a,onIntersect:c}),i?(0,y.jsx)(g.A,{}):o?(0,y.jsx)(p.A,{errMessage:o.message}):t?(0,y.jsx)(M,{}):(0,y.jsxs)($,{children:[(0,y.jsxs)(_.A,{stickyHeader:!0,sx:{borderCollapse:"collapse"},children:[(0,y.jsx)(O.A,{children:(0,y.jsxs)(P.A,{children:[(0,y.jsx)(S.A,{children:"#"}),(0,y.jsx)(S.A,{colSpan:2,children:"제목"}),(0,y.jsx)(S.A,{children:"앨범"}),(0,y.jsx)(ee,{children:"추가한 날짜"}),(0,y.jsx)(S.A,{children:"시간"})]})}),(0,y.jsx)(I.A,{children:null==r?void 0:r.pages.map(((e,n)=>e.items.map(((e,t)=>(0,y.jsx)(W,{idx:10*n+t+1,item:e},t)))))})]}),(0,y.jsx)(U.A,{isLoading:l,isFinished:!a}),!l&&(0,y.jsx)(U.n,{id:"observer-playlistItems"})]})},$=(0,x.Ay)(C.A)(X||(X=(0,r.A)(["\n  flex-grow: 1;\n  padding-bottom: 5rem;\n  overflow: auto;\n  overflow-x: hidden;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),ee=(0,x.Ay)(S.A)(Y||(Y=(0,r.A)(["\n  "," {\n    display: none;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")}));var ne,te;const re=()=>{var e,n,t;const{id:r=""}=(0,o.g)(),{data:i,isLoading:a,error:s}=c({playlist_id:r});return a?(0,y.jsx)(g.A,{}):s?"retry"===s.message?(0,y.jsxs)(ie,{children:[(0,y.jsx)(R.A,{variant:"h1",marginBottom:"0.5rem",children:"인증이 만료되었습니다."}),(0,y.jsx)(R.A,{variant:"h2",color:"#999999",marginBottom:"1rem",children:"재로그인 해주세요."}),(0,y.jsx)(u.A,{})]}):(0,y.jsx)(p.A,{errMessage:s.message}):(0,y.jsxs)(oe,{children:[(0,y.jsx)(b,{image:null!=i&&i.images?null==i?void 0:i.images[0].url:null,listName:(null==i?void 0:i.name)||"플레이리스트",description:(null==i?void 0:i.description)||"",ownerName:(null==i||null===(e=i.owner)||void 0===e?void 0:e.display_name)||"알수없음",count:(null==i||null===(n=i.tracks)||void 0===n?void 0:n.items.length)||0}),(0,y.jsx)(Z,{id:r,isShow:0===(null==i||null===(t=i.tracks)||void 0===t?void 0:t.total)})]})},ie=(0,i.Ay)("div")(ne||(ne=(0,r.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n"]))),oe=(0,i.Ay)("div")(te||(te=(0,r.A)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"])))},1696:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"images/fake_Logo.png?ver=23c568bf691b001bb110dc7d5d52caaa"},2483:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(7163),i=t(4848);const o=e=>{let{errMessage:n}=e;return(0,i.jsxs)(r.A,{severity:"error",children:[n," "]})}},2638:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(7286),i=t(4690),o=t(5443);const a=async()=>{try{return(await o.A.get("/me")).data}catch(e){throw(0,i.r)(),new Error("프로필 얻기 실패")}},s=()=>{const e=localStorage.getItem("access_token");return(0,r.I)({queryKey:["current-user-profile"],queryFn:a,enabled:!!e,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1})}},2885:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(6540);const i=e=>{let{page:n,isLoading:t,isFinished:i,onIntersect:o}=e;(0,r.useEffect)((()=>{if(t)return;if(i)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&o()}),{threshold:0}),r=document.getElementById("observer-".concat(n));return r&&e.observe(r),()=>{r&&e.unobserve(r)}}),[t,i,o])}},4064:(e,n,t)=>{t.d(n,{Dg:()=>s,Nt:()=>c,U4:()=>o,bt:()=>a});var r=t(3110),i=t(5443);const o=async e=>{let{limit:n,offset:t}=e;try{return(await i.A.get("/me/playlists",{params:{limit:n,offset:t}})).data}catch(e){throw new Error("실패: playlist 가져오기")}},a=async e=>{try{return(await i.A.get("/playlists/".concat(e.playlist_id),{params:e})).data}catch(e){var n;if((0,r.F0)(e)&&401===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("retry");throw new Error("fail getPlaylist")}},s=async e=>{try{return(await i.A.get("/playlists/".concat(e.playlist_id,"/tracks"),{params:e})).data}catch(e){throw new Error("fail getPlaylistItems")}},c=async(e,n)=>{try{const{name:t,collaborative:r,description:o}=n;return(await i.A.post("/users/".concat(e,"/playlists"),{name:t,public:n.public,collaborative:r,description:o})).data}catch(e){throw new Error("fail createPlaylist")}}},4690:(e,n,t)=>{t.d(n,{G:()=>o,r:()=>a});var r=t(8097),i=t(5800);const o=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,n)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n%62]),""),n=(t=await(async e=>{const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",n)})(e),btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var t;const o=r.xl,a=i.f,s=r.iW,c=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),o&&a){const e={response_type:"code",client_id:o,scope:s,code_challenge_method:"S256",code_challenge:n,redirect_uri:a};c.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=c.toString()}},a=()=>{localStorage.removeItem("code_verifier"),localStorage.removeItem("access_token"),window.location.href="/"}},5443:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1083),i=t(5800);const o=r.A.create({baseURL:i.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});o.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const a=o},5865:(e,n,t)=>{t.d(n,{A:()=>l,n:()=>h});var r,i,o=t(7528),a=t(4651),s=t(4812),c=t(4848);const l=e=>{let{isLoading:n,isFinished:t}=e;return(0,c.jsx)(d,{children:n?(0,c.jsx)(s.k,{width:30,height:30}):t?(0,c.jsx)("div",{children:"마지막 입니다."}):(0,c.jsx)(c.Fragment,{})})},d=(0,a.Ay)("div")(r||(r=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 3rem;\n  font-size: 14px;\n  color: #858585;\n"]))),h=(0,a.Ay)("div")(i||(i=(0,o.A)(["\n  height: 1rem;\n  /* background-color: yellow; */\n"])))},8079:(e,n,t)=>{t.d(n,{A:()=>O});var r=t(7528),i=t(7695),o=t(431),a=t(4690),s=t(2638),c=t(6540);const l=["#ed9282","#fad57a","#f48aab","#87bbe2","#56b444"],d=t.p+"images/profileIcon.png?ver=e2f1e38bebae9a2ca011ed6975e9d0d9";var h,m,u=t(4848);const p=e=>{let{isOpen:n,itemRef:t,changeColorCode:r}=e;return n?(0,u.jsxs)(g,{ref:t,children:[(0,u.jsx)(x,{onClick:e=>{e.stopPropagation(),r()},children:"랜덤 프로필"}),(0,u.jsx)("div",{className:"hr"}),(0,u.jsx)(x,{onClick:a.r,children:"Logout"})]}):null},g=(0,i.Ay)("div")(h||(h=(0,r.A)(["\n  position: absolute;\n  right: -30%;\n  top: 110%;\n  width: 12rem;\n  padding: 4px;\n  font-size: 16px;\n  background-color: #303030;\n  border-radius: 4px;\n\n  div.hr {\n    height: 1px;\n    background-color: #484848;\n  }\n"]))),x=(0,i.Ay)("div")(m||(m=(0,r.A)(["\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: #4d4d4d;\n    text-decoration: underline;\n  }\n"])));var v,f,y;const b=e=>{let{imageUrl:n}=e;return(0,u.jsx)(k,{src:n,alt:"프로필 아이콘"})},A=()=>{var e;const{data:n}=(0,s.A)(),{colorCode:t,getRandomCode:r}=(()=>{const[e,n]=(0,c.useState)("#56b444");return{colorCode:e,getRandomCode:()=>{const t=l.filter((n=>n!==e)),r=Math.floor(Math.random()*t.length);n(t[r])}}})(),{open:i,open_modal:o,close_modal:a}=(()=>{const[e,n]=(0,c.useState)(!1);return{open:e,close_modal:e=>{n(!1),e&&e()},open_modal:()=>n(!0)}})(),h=(e=>{const n=(0,c.useRef)(null),t=t=>{n.current&&!n.current.contains(t.target)&&e()};return(0,c.useEffect)((()=>(document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)})),[e]),n})(a),m=(null==n||null===(e=n.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url)||null;return(0,u.jsxs)(j,{onClick:o,children:[(0,u.jsx)(w,{haveImgUrl:!!m,code:t,children:(0,u.jsx)(b,{imageUrl:m||d})}),(0,u.jsx)(p,{isOpen:i,itemRef:h,changeColorCode:()=>a(r)})]})},j=(0,i.Ay)("div")(v||(v=(0,r.A)(["\n  position: relative;\n"]))),w=(0,i.Ay)("div")(f||(f=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3.4rem;\n  aspect-ratio: 1/1;\n  background-color: ",";\n  border-radius: 50px;\n  border: 8px solid;\n  border-color: ",";\n  overflow: hidden;\n  cursor: pointer;\n"])),(e=>{let{code:n}=e;return n}),(e=>{let{haveImgUrl:n,code:t}=e;return n?t:"#1f1f1f"})),k=(0,i.Ay)("img")(y||(y=(0,r.A)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n"])));var _;const O=()=>localStorage.getItem("access_token")?(0,u.jsx)(A,{}):(0,u.jsx)(P,{variant:"contained",color:"secondary",onClick:a.G,children:"로그인하기"}),P=(0,i.Ay)(o.A)(_||(_=(0,r.A)(["\n  width: 7rem;\n  height: 2.6rem;\n  font-size: 16px;\n  font-weight: bold;\n"])))}}]);
//# sourceMappingURL=691.js.map?ver=2e8a0f580dbabce75b25