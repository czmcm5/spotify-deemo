"use strict";(self.webpackChunkspotify_deemo=self.webpackChunkspotify_deemo||[]).push([[297],{45:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(8587);function i(e,n){if(null==e)return{};var t,i,o=(0,r.A)(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}},297:(e,n,t)=>{t.r(n),t.d(n,{default:()=>_e});var r=t(7528),i=t(9120),o=t(8957),a=t(6540),s=t(5647),l=t(6928),c=t(4848);const d=[{label:"전체",types:[l.C.Track,l.C.Album,l.C.Artist]},{label:"곡",types:[l.C.Track]},{label:"아티스트",types:[l.C.Artist]},{label:"앨범",types:[l.C.Album]}],u=(0,a.createContext)(void 0),m=e=>{let{children:n}=e;const{pathname:t}=(0,s.zy)(),[r,i]=(0,a.useState)("전체"),o=(0,a.useMemo)((()=>{try{return decodeURIComponent(t.replace("/search/",""))}catch(e){return console.warn("URL 디코딩 실패:",e),t.replace("/search/","")}}),[t]),m=(0,a.useMemo)((()=>d.find((e=>e.label===r))),[r]),p=(0,a.useMemo)((()=>{var e;return null!==(e=null==m?void 0:m.types)&&void 0!==e?e:[l.C.Track,l.C.Album,l.C.Artist]}),[m]),h=(0,a.useMemo)((()=>1===p.length?40:6),[p.length]),g=(0,a.useCallback)((e=>r===e),[r]),v=(0,a.useCallback)((e=>{d.some((n=>n.label===e))?i(e):console.warn("유효하지 않은 메뉴 이름: ".concat(e))}),[]),f=(0,a.useMemo)((()=>({keyword:o,type:p,limit:h,menuName:r,setMenuName:v,isSelected:g})),[o,p,h,r,v,g]);return(0,c.jsx)(u.Provider,{value:f,children:n})},p=()=>{const e=(0,a.useContext)(u);if(!e)throw new Error("useSearchFilterContext must be used within a SearchFilterProvider");return e};var h;const g=()=>{const{setMenuName:e,isSelected:n}=p();return(0,c.jsx)(o.A,{display:"flex",children:["전체","곡","아티스트","앨범"].map((t=>(0,c.jsx)(v,{onClick:()=>e(t),className:n(t)?"this":"",children:t},t)))})},v=(0,i.Ay)("div")(h||(h=(0,r.A)(["\n  padding: 5px 1rem;\n  background-color: #3a3a3a;\n  border-radius: 50px;\n  margin-right: 0.5rem;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #454545;\n  }\n  &.this {\n    background-color: white;\n    color: #2a2a2a;\n    font-weight: 700;\n  }\n"])));var f=t(9494),y=t(3413),b=t(2680),x=t(2483),A=t(4812),w=t(5865),j=t(583),k=t(7517),O=t(5504),P=t(5699);const S=(0,a.createContext)(void 0),C=e=>{let{children:n}=e;const[t,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),s={trackUri:t,playlist_id:i,selectTrack:e=>r(e),selectPlaylist:e=>o(e)};return(0,c.jsx)(S.Provider,{value:s,children:n})},T=()=>{const e=(0,a.useContext)(S);if(!e)throw new Error("useTrackSelected must be used within OnSearchProvider");return e};var _,E,N=t(431),I=t(868),M=t(8129),F=t(6739),q=t(2638),L=t(1206);const R=e=>{var n;let{item:t,onClick:r,isSelect:i=!1}=e;return(0,c.jsxs)(U,{onClick:r,className:i?"select":void 0,children:[(0,c.jsxs)(o.A,{display:"flex",alignItems:"center",children:[(0,c.jsx)(D,{children:(0,c.jsx)("img",{src:(null===(n=t.images)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.url)||L.A,className:t.images?void 0:"musicIcon",alt:"music_섬네일"})}),(0,c.jsx)(f.A,{children:t.name})]}),(0,c.jsx)("input",{type:"checkbox",checked:i,readOnly:!0})]})},U=(0,i.Ay)("div")(_||(_=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem;\n  border-radius: 4px;\n\n  &.select {\n    color: #10d83f;\n  }\n  &:hover {\n    background-color: #101010;\n  }\n"]))),D=(0,i.Ay)("div")(E||(E=(0,r.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  aspect-ratio: 1/1;\n  margin-right: 1rem;\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: #313131;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n  img.musicIcon {\n    width: 70%;\n    height: 70%;\n  }\n\n  "," {\n    margin-right: 0.5rem;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")}));var z,B;const K=e=>{let{itemRef:n}=e;const{data:t}=(0,q.A)(),{showAlert:r}=(0,I.x)(),{trackUri:i,playlist_id:s,selectPlaylist:l,selectTrack:d}=T(),{data:u,error:m}=(0,F.A)({limit:10,enabled:!!t}),{mutate:p,isPending:h,error:g}=(0,M.A)({afterFn:()=>v()}),v=()=>{d(null),l(null)};return(0,a.useEffect)((()=>{if(t)if(m||g){const e=(null==m?void 0:m.message)||(null==g?void 0:g.message);r(e||"실패",v)}else!u||u.pages&&0!==u.pages[0].total||r("내 플레이리스트가 없습니다.",v);else r("로그인을 해주세요.",v)}),[t,m,g,u]),!t||m||g||null==u||!u.pages||0===u.pages[0].total?null:(0,c.jsxs)(H,{ref:n,children:[(0,c.jsx)("div",{children:"플레이리스트에 추가"}),(0,c.jsx)(W,{children:u.pages.map((e=>e.items.map(((e,n)=>(0,c.jsx)(R,{item:e,isSelect:s===e.id,onClick:()=>{return n=e.id||"",void l(n);var n}},n)))))}),(0,c.jsxs)(o.A,{display:"flex",justifyContent:"flex-end",marginTop:1,children:[(0,c.jsx)(N.A,{onClick:v,children:"취소"}),s&&(0,c.jsx)(N.A,{variant:"contained",color:"secondary",onClick:()=>{h||s&&i&&p({playlist_id:s,uris:[i]})},children:"저장"})]})]})},H=(0,i.Ay)("div")(z||(z=(0,r.A)(["\n  z-index: 10;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  top: 50%;\n  right: 0%;\n  margin-right: 5rem;\n  width: 20rem;\n  height: 30rem;\n  padding: 1rem;\n  background-color: #1d1d1d;\n  border: 1px solid #101010;\n  border-radius: 4px;\n\n  "," {\n    top: 100%;\n    width: 15rem;\n    height: 20rem;\n    padding: 0.5rem;\n    margin: 0;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")})),W=(0,i.Ay)("div")(B||(B=(0,r.A)(["\n  flex: 1;\n  height: 100%;\n  overflow: auto;\n"])));var X=t(1373),$=t(5563),G=t(4705),Q=t(45),V=t(1626),Y=t(8160);const J=(0,t(6148).A)("MuiBox",["root"]),Z=(0,Y.A)({defaultClassName:J.root,generateClassName:V.A.generate});var ee,ne,te,re,ie=t(4808),oe=t(3179);const ae=["idx","img","name","artistName","duration_ms","isSelect"];function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,G.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const ce=e=>{let{idx:n,img:t,name:r="알수없음",artistName:i="알수없음",duration_ms:o=0,isSelect:a}=e,s=(0,Q.A)(e,ae);const l=(0,oe.A)();return(0,c.jsxs)(de,{onMouseOver:l.on,onMouseLeave:l.off,className:a?"select":void 0,children:[(0,c.jsxs)(Z,{display:"flex",alignItems:"center",children:[n&&(0,c.jsx)(f.A,{variant:"subtitle1",marginRight:2,children:n}),(0,c.jsx)(pe,{children:(0,c.jsx)("img",{src:t,alt:r,className:"Thumbnail"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(ue,{children:r}),(0,c.jsx)(f.A,{variant:"subtitle1",children:i})]})]}),(0,c.jsxs)(me,{display:"flex",alignItems:"center",className:l.isfocuse,children:[(0,c.jsx)(f.A,{marginRight:1,children:(0,$.vq)(o)}),(0,c.jsx)(N.A,le(le({},s),{},{children:"+"}))]})]})},de=(0,ie.A)("div")(ee||(ee=(0,r.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem;\n  border-radius: 8px;\n  overflow: hidden;\n  :hover {\n    background-color: #272727;\n  }\n  &.select {\n    background-color: #2d2d2d;\n  }\n"]))),ue=(0,ie.A)(f.A)(ne||(ne=(0,r.A)(["\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]))),me=(0,ie.A)(Z)(te||(te=(0,r.A)(["\n  position: absolute;\n  right: -3rem;\n  top: 50%;\n  transform: translateY(-50%);\n  transition: all 0.4s ease;\n  pointer-events: none;\n\n  &.show {\n    right: 1rem;\n    pointer-events: auto;\n  }\n"]))),pe=(0,ie.A)("div")(re||(re=(0,r.A)(["\n  width: ",";\n  aspect-ratio: 1/1;\n  margin-right: 1rem;\n  border-radius: 4px;\n  overflow: hidden;\n\n  img.Thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"])),(e=>{let{width:n}=e;return"".concat(n||3,"rem")})),he=e=>{let{tracks:n,pagenum:t}=e;const{trackUri:r,selectTrack:i,selectPlaylist:a}=T(),s=(0,X.A)((()=>{i(null),a(null)}));return(0,c.jsx)(o.A,{children:n.map(((e,n)=>{var a;return(0,c.jsxs)(o.A,{position:"relative",children:[(0,c.jsx)(ce,{idx:(0,$.H5)(20,t,n),img:(null===(a=e.album.images)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.url)||L.A,name:e.name,artistName:e.artists[0].name,duration_ms:e.duration_ms,isSelect:r===e.uri,onClick:()=>{return n=e.uri,void i(n);var n}}),r&&r===e.uri&&(0,c.jsx)(K,{itemRef:s})]},n)}))})},ge=e=>{let{tracks:n}=e;const{trackUri:t,selectTrack:r,selectPlaylist:i}=T(),o=(0,X.A)((()=>{r(null),i(null)}));return(0,c.jsxs)(Z,{flex:1,children:[(0,c.jsx)(f.A,{variant:"h1",padding:2,paddingTop:6,children:"곡"}),n.map(((e,n)=>{var i;return n>3?null:(0,c.jsxs)(Z,{position:"relative",children:[(0,c.jsx)(ce,{img:(null===(i=e.album.images)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.url)||L.A,name:e.name,artistName:e.artists[0].name,duration_ms:e.duration_ms,isSelect:t===e.uri,onClick:()=>{return n=e.uri,void r(n);var n}}),t&&t===e.uri&&(0,c.jsx)(K,{itemRef:o})]},n)}))]})};var ve,fe,ye=t(5730);const be=e=>{let{img:n,name:t="알수없음",albumName:r="알수없음"}=e;const i=(0,oe.A)();return(0,c.jsxs)(o.A,{flex:1,children:[(0,c.jsx)(f.A,{variant:"h1",padding:2,paddingTop:6,children:"상위 결과"}),(0,c.jsxs)(xe,{onMouseOver:i.on,onMouseLeave:i.off,children:[(0,c.jsx)(Ae,{width:8,children:(0,c.jsx)("img",{src:n||L.A,alt:t,className:"Thumbnail"})}),(0,c.jsx)(f.A,{variant:"h1",fontSize:30,paddingBottom:1,paddingTop:1,children:t}),(0,c.jsxs)(f.A,{children:[" 앨범 • ",r]}),(0,c.jsx)(ye.A,{isfocuse:i.isfocuse})]})]})},xe=(0,i.Ay)("div")(ve||(ve=(0,r.A)(["\n  position: relative;\n  flex: 1;\n  margin-right: 1rem;\n  height: 75%;\n  padding: 1rem;\n  border-radius: 8px;\n  :hover {\n    background-color: #272727;\n  }\n"]))),Ae=(0,i.Ay)("div")(fe||(fe=(0,r.A)(["\n  width: ",";\n  aspect-ratio: 1/1;\n  margin-right: 1rem;\n  border-radius: 4px;\n  overflow: hidden;\n\n  img.Thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"])),(e=>{let{width:n}=e;return"".concat(n||3,"rem")}));var we;const je=e=>{var n;let{tracks:t,pagenum:r,isCurrentMenu:i}=e;return i?(0,c.jsx)(C,{children:(0,c.jsx)(he,{tracks:t,pagenum:r})}):(0,c.jsxs)(ke,{display:"flex",children:[(0,c.jsx)(be,{img:null===(n=t[0].album.images)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.url,name:t[0].name,albumName:t[0].album.name}),(0,c.jsx)(C,{children:(0,c.jsx)(ge,{tracks:t})})]})},ke=(0,i.Ay)(o.A)(we||(we=(0,r.A)(["\n  "," {\n    flex-direction: column;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")}));var Oe;const Pe=()=>{var e,n,t;const{keyword:r,type:i,limit:o,menuName:a}=p(),{data:s,error:l,isLoading:d,hasNextPage:u,fetchNextPage:m,isFetchingNextPage:h}=(0,b.A)({q:r,type:i,limit:o});if((0,y.A)({page:"search-result",isLoading:h,isFinished:!u,onIntersect:m}),d)return(0,c.jsx)(Se,{children:(0,c.jsx)(A.k,{width:40,height:40})});if(l)return(0,c.jsx)(x.A,{errMessage:l.message});const g=null==s?void 0:s.pages[0],v=g&&(null===(e=g.tracks)||void 0===e?void 0:e.total)||0,S=g&&(null===(n=g.albums)||void 0===n?void 0:n.total)||0,C=g&&(null===(t=g.artists)||void 0===t?void 0:t.total)||0;return!g||0===v&&0===S&&0===C?(0,c.jsx)(j.A,{keyword:r}):(0,c.jsxs)(c.Fragment,{children:[v>0&&"곡"===a&&(0,c.jsx)(f.A,{variant:"h1",padding:2,paddingTop:6,children:"곡"}),v>0&&s.pages.map(((e,n)=>{var t,r;return null!=e&&null!==(t=e.tracks)&&void 0!==t&&t.items?(0,c.jsx)(je,{pagenum:n,tracks:null==e||null===(r=e.tracks)||void 0===r?void 0:r.items,isCurrentMenu:"곡"===a},n):null})),S>0&&(0,c.jsx)(f.A,{variant:"h1",padding:2,paddingTop:6,children:"앨범"}),(0,c.jsx)(O.l,{children:s.pages.map((e=>{var n;return null==e||null===(n=e.albums)||void 0===n?void 0:n.items.map(((e,n)=>(0,c.jsx)(P.A,{albums:e},n)))}))}),C>0&&(0,c.jsx)(f.A,{variant:"h1",padding:2,paddingTop:6,children:"아티스트"}),(0,c.jsx)(O.l,{children:s.pages.map((e=>{var n;return null==e||null===(n=e.artists)||void 0===n?void 0:n.items.map(((e,n)=>(0,c.jsx)(k.A,{artists:e},n)))}))}),1===i.length&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w.A,{isLoading:h,isFinished:!u}),!h&&(0,c.jsx)(w.n,{id:"observer-search-result"})]})]})},Se=(0,i.Ay)("div")(Oe||(Oe=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"])));var Ce,Te;const _e=()=>(0,c.jsx)(Ee,{children:(0,c.jsxs)(m,{children:[(0,c.jsx)(g,{}),(0,c.jsx)(Ne,{children:(0,c.jsx)(Pe,{})})]})}),Ee=(0,i.Ay)("div")(Ce||(Ce=(0,r.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  max-height: 100%;\n  padding: 1rem;\n"]))),Ne=(0,i.Ay)(o.A)(Te||(Te=(0,r.A)(["\n  flex-grow: 1;\n  padding-bottom: 10rem;\n  overflow-y: auto;\n"])))},583:(e,n,t)=>{t.d(n,{A:()=>l});var r,i=t(7528),o=t(9494),a=t(9120),s=t(4848);const l=e=>{let{keyword:n}=e;return(0,s.jsxs)(c,{children:[(0,s.jsxs)(o.A,{variant:"h1",marginBottom:"0.5rem",children:['"',n,'"과(와) 일치하는 결과 없음']}),(0,s.jsx)(o.A,{variant:"h2",color:"#999999",marginBottom:"1rem",children:"입력한 단어의 철자가 맞는지 확인하거나 짧은 키워드 또는 다른 키워드를 사용하세요."})]})},c=(0,a.Ay)("div")(r||(r=(0,i.A)(["\n  margin-top: 2rem;\n  text-align: center;\n"])))},868:(e,n,t)=>{t.d(n,{S:()=>a,x:()=>s});var r=t(6540),i=t(4848);const o=(0,r.createContext)(void 0),a=e=>{let{children:n}=e;const[t,a]=(0,r.useState)("none"),[s,l]=(0,r.useState)(""),c={openAlert:t,message:s,showAlert:(0,r.useCallback)(((e,n)=>{l(e),a("show"),setTimeout((()=>{a("none"),n&&n()}),2e3)}),[])};return(0,i.jsx)(o.Provider,{value:c,children:n})},s=()=>{const e=(0,r.useContext)(o);if(!e)throw new Error("useAlertMessage must be used within an AlertProvider");return e}},1206:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"images/music.png?ver=708d7d1874e81d24a372040f4906d76d"},1373:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(6540);const i=e=>{const n=(0,r.useRef)(null),t=t=>{n.current&&!n.current.contains(t.target)&&e()};return(0,r.useEffect)((()=>(document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)})),[e]),n}},2483:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(7163),i=t(4848);const o=e=>{let{errMessage:n}=e;return(0,i.jsxs)(r.A,{severity:"error",children:[n," "]})}},2638:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(7286),i=t(4690),o=t(5443);const a=async()=>{try{return(await o.A.get("/me")).data}catch(e){throw(0,i.r)(),new Error("프로필 얻기 실패")}},s=()=>{const e=localStorage.getItem("access_token");return(0,r.I)({queryKey:["current-user-profile"],queryFn:a,enabled:!!e,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1})}},2680:(e,n,t)=>{t.d(n,{A:()=>d});var r=t(4705),i=t(6475),o=t(1083),a=t(5800),s=t(3653);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const d=e=>{const n=(0,s.A)();return(0,i.q)({queryKey:["search",e.q,e.type],queryFn:t=>{let{pageParam:r=0}=t;if(n)return(async(e,n)=>{try{const t=new URLSearchParams;return t.append("q",n.q),t.append("type",n.type.join(",")),n.market&&t.append("market",n.market.toString()),n.limit&&t.append("limit",n.limit.toString()),n.offset&&t.append("offset",n.offset.toString()),n.include_external&&t.append("include_external",n.include_external),(await o.A.get("".concat(a.$,"/search"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},params:t})).data}catch(e){throw new Error("실패: 검색 결과 가져오기")}})(n,c(c({},e),{},{offset:r}))},enabled:!!e.q&&!!n,initialPageParam:0,getNextPageParam:e=>{var n,t,r,i,o,a,s;if(!e)return;const l=(null===(n=e.tracks)||void 0===n?void 0:n.next)||(null===(t=e.artists)||void 0===t?void 0:t.next)||(null===(r=e.albums)||void 0===r?void 0:r.next)||(null===(i=e.playlists)||void 0===i?void 0:i.next)||(null===(o=e.shows)||void 0===o?void 0:o.next)||(null===(a=e.episodes)||void 0===a?void 0:a.next)||(null===(s=e.audiobooks)||void 0===s?void 0:s.next);if(l){const e=new URL(l).searchParams.get("offset");return e?parseInt(e):void 0}}})}},3179:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(6540);const i=()=>{const[e,n]=(0,r.useState)("none");return{isfocuse:e,on:()=>n("show"),off:()=>n("none")}}},3413:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(6540);const i=e=>{let{page:n,isLoading:t,isFinished:i,onIntersect:o}=e;(0,r.useEffect)((()=>{if(t)return;if(i)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&o()}),{threshold:0}),r=document.getElementById("observer-".concat(n));return r&&e.observe(r),()=>{r&&e.unobserve(r)}}),[t,i,o])}},3653:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(7286),i=t(2154);const o=()=>{const{data:e}=(0,r.I)({queryKey:["spo-access-token"],queryFn:i.K});return null==e?void 0:e.access_token}},4064:(e,n,t)=>{t.d(n,{Dg:()=>c,Nt:()=>d,U4:()=>s,XI:()=>u,bt:()=>l,pR:()=>m});var r=t(3110),i=t(1083),o=t(5443),a=t(5800);const s=async e=>{let{limit:n,offset:t}=e;try{return(await o.A.get("/me/playlists",{params:{limit:n,offset:t}})).data}catch(e){throw new Error("실패: playlist 가져오기")}},l=async e=>{try{return(await o.A.get("/playlists/".concat(e.playlist_id),{params:e})).data}catch(e){var n;if(console.log(e),(0,r.F0)(e)&&401===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("retry");throw new Error("fail getPlaylist")}},c=async e=>{try{return(await o.A.get("/playlists/".concat(e.playlist_id,"/tracks"),{params:e})).data}catch(e){throw new Error("fail getPlaylistItems")}},d=async(e,n)=>{try{const{name:t,collaborative:r,description:i}=n;return(await o.A.post("/users/".concat(e,"/playlists"),{name:t,public:n.public,collaborative:r,description:i})).data}catch(e){throw new Error("fail createPlaylist")}},u=async e=>{try{return(await o.A.post("/playlists/".concat(e.playlist_id,"/tracks"),e)).data}catch(e){var n;if((0,r.F0)(e)&&401===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error("retry");throw new Error("fail add item to playlist")}},m=async e=>{let{token:n,params:t}=e;try{return(await i.A.get("".concat(a.$,"/playlists/").concat(t.playlist_id,"/tracks"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},params:t})).data}catch(e){throw new Error("fail getPlaylistItems")}}},4690:(e,n,t)=>{t.d(n,{G:()=>o,r:()=>a});var r=t(8097),i=t(5800);const o=async()=>{const e=crypto.getRandomValues(new Uint8Array(64)).reduce(((e,n)=>e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n%62]),""),n=(t=await(async e=>{const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",n)})(e),btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"));var t;const o=r.xl,a=i.f,s=r.iW,l=new URL("https://accounts.spotify.com/authorize");if(window.localStorage.setItem("code_verifier",e),o&&a){const e={response_type:"code",client_id:o,scope:s,code_challenge_method:"S256",code_challenge:n,redirect_uri:a};l.search=new URLSearchParams(Object.entries(e)).toString(),window.location.href=l.toString()}},a=()=>{localStorage.removeItem("code_verifier"),localStorage.removeItem("access_token"),window.location.href="/"}},4705:(e,n,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,n,t){return(n=function(e){var n=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,{A:()=>i})},4808:(e,n,t)=>{t.d(n,{A:()=>r});const r=(0,t(3248).Ay)()},5443:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1083),i=t(5800);const o=r.A.create({baseURL:i.$,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});o.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem("access_token")),e)));const a=o},5504:(e,n,t)=>{t.d(n,{l:()=>o});var r,i=t(7528);const o=(0,t(9120).Ay)("div")(r||(r=(0,i.A)(["\n  display: grid;\n  grid-template-columns: repeat(6, 1fr);\n  "," {\n    grid-template-columns: 1fr 1fr 1fr;\n    display: grid;\n  }\n  "," {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n  }\n"])),(e=>{let{theme:n}=e;return n.breakpoints.down("md")}),(e=>{let{theme:n}=e;return n.breakpoints.down("sm")}))},5563:(e,n,t)=>{function r(e){if(null===e)return"-";const n=new Date(e),t=(new Date).getTime()-n.getTime(),r=Math.floor(t/864e5);return r>0?"".concat(r,"일 전"):"오늘"}function i(e){const n=Math.floor(e/1e3),t=Math.floor(n/60),r=(n%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)}function o(e,n,t){return e*n+t+1}t.d(n,{H5:()=>o,N_:()=>r,vq:()=>i})},5699:(e,n,t)=>{t.d(n,{A:()=>p});var r,i,o,a=t(7528),s=t(9494),l=t(9120),c=t(3179),d=t(5730),u=t(8286),m=t(4848);const p=e=>{var n;let{albums:t}=e;const r=(0,c.A)();return(0,m.jsxs)(h,{onMouseOver:r.on,onMouseLeave:r.off,children:[(0,m.jsxs)(v,{children:[(0,m.jsx)("img",{src:null===(n=t.images[0])||void 0===n?void 0:n.url,alt:t.name,className:"Thumbnail"}),(0,m.jsx)(d.A,{isfocuse:r.isfocuse,onClick:()=>{(0,u.p)({type:"album",id:t.id})}})]}),(0,m.jsx)(g,{children:t.name}),(0,m.jsx)(s.A,{variant:"subtitle1",children:t.artists[0].name})]})},h=(0,l.Ay)("div")(r||(r=(0,a.A)(["\n  flex: 1;\n  padding: 1rem;\n  border-radius: 8px;\n  :hover {\n    background-color: #272727;\n  }\n"]))),g=(0,l.Ay)(s.A)(i||(i=(0,a.A)(["\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]))),v=(0,l.Ay)("div")(o||(o=(0,a.A)(["\n  position: relative;\n  width: 100%;\n  aspect-ratio: 1/1;\n  margin-bottom: 1rem;\n  border-radius: 8px;\n  overflow: hidden;\n  img.Thumbnail {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"])))},5730:(e,n,t)=>{t.d(n,{A:()=>p});var r=t(7528),i=t(4705),o=t(45),a=t(9120);const s=t.p+"images/playArrow.png?ver=268195a693e6364e31a52dd9ebe3c5d5";var l,c=t(4848);const d=["isfocuse"];function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const p=e=>{let{isfocuse:n}=e,t=(0,o.A)(e,d);return(0,c.jsx)(h,m(m({className:n},t),{},{children:(0,c.jsx)("img",{src:s,alt:"재생버튼"})}))},h=(0,a.Ay)("div")(l||(l=(0,r.A)(["\n  position: absolute;\n  right: 5%;\n  bottom: -10%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 3rem;\n  aspect-ratio: 1/1;\n  border-radius: 50px;\n  background-color: #1ed760;\n  box-shadow: 0 3px 5px 2px #00000072;\n\n  opacity: 0;\n  transition: bottom 0.4s ease, opacity 0.4s ease;\n  &.show {\n    bottom: 5%;\n    opacity: 1;\n  }\n\n  :hover {\n    width: 3.1rem;\n    background-color: #29ea6d;\n  }\n  img {\n    width: 25px;\n    height: 25px;\n  }\n"])))},5865:(e,n,t)=>{t.d(n,{A:()=>c,n:()=>u});var r,i,o=t(7528),a=t(4651),s=t(4812),l=t(4848);const c=e=>{let{isLoading:n,isFinished:t,showText:r=!0}=e;return(0,l.jsx)(d,{children:n?(0,l.jsx)(s.k,{width:30,height:30}):t&&r?(0,l.jsx)("div",{children:"마지막 입니다."}):(0,l.jsx)(l.Fragment,{})})},d=(0,a.Ay)("div")(r||(r=(0,o.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 3rem;\n  font-size: 14px;\n  color: #858585;\n"]))),u=(0,a.Ay)("div")(i||(i=(0,o.A)(["\n  height: 1rem;\n  /* background-color: yellow; */\n"])))},6739:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(6475),i=t(4064);const o=e=>{let{limit:n,enabled:t}=e;return(0,r.q)({queryKey:["current-user-playlists"],queryFn:e=>{let{pageParam:t}=e;return(0,i.U4)({limit:n,offset:t})},enabled:t,initialPageParam:0,getNextPageParam:e=>{if(e.next){const n=new URL(e.next).searchParams.get("offset");return n?parseInt(n):void 0}}})}},6928:(e,n,t)=>{t.d(n,{C:()=>r});let r=function(e){return e.Album="album",e.Artist="artist",e.Playlist="playlists",e.Track="track",e.Show="show",e.Episode="episode",e.Audiobook="audiobook",e}({})},7517:(e,n,t)=>{t.d(n,{A:()=>h});var r,i,o,a=t(7528),s=t(9494),l=t(9120),c=t(5730),d=t(3179),u=t(1206),m=t(8286),p=t(4848);const h=e=>{var n;let{artists:t}=e;const r=(0,d.A)();return(0,p.jsxs)(g,{onMouseOver:r.on,onMouseLeave:r.off,children:[(0,p.jsxs)(f,{children:[(0,p.jsx)("img",{src:(null===(n=t.images[0])||void 0===n?void 0:n.url)||u.A,alt:t.name,className:"Thumbnail"}),(0,p.jsx)(c.A,{isfocuse:r.isfocuse,onClick:()=>{t.id&&(0,m.p)({type:"artist",id:t.id})}})]}),(0,p.jsx)(v,{children:t.name}),(0,p.jsx)(s.A,{variant:"subtitle1",children:"Artist"})]})},g=(0,l.Ay)("div")(r||(r=(0,a.A)(["\n  flex: 1;\n  padding: 1rem;\n  border-radius: 8px;\n  :hover {\n    background-color: #272727;\n  }\n"]))),v=(0,l.Ay)(s.A)(i||(i=(0,a.A)(["\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]))),f=(0,l.Ay)("div")(o||(o=(0,a.A)(["\n  position: relative;\n  width: 100%;\n  aspect-ratio: 1/1;\n  margin-bottom: 1rem;\n  img.Thumbnail {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n"])))},8129:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(7665),i=t(7097),o=t(4064),a=t(868);const s=e=>{let{afterFn:n}=e;const t=(0,r.jE)(),{showAlert:s}=(0,a.x)();return(0,i.n)({mutationFn:e=>(0,o.XI)(e),onSuccess:()=>{t.invalidateQueries({queryKey:["playlist-detail"]}),s("트랙이 성공적으로 추가되었습니다."),n&&n()}})}},8286:(e,n,t)=>{t.d(n,{p:()=>r});const r=e=>{let{type:n,id:t}=e;window.open("https://open.spotify.com/".concat(n,"/").concat(t))}}}]);
//# sourceMappingURL=297.js.map?ver=6c0d59a2cc7d1c50792c